<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <!-- Optimized: Pre-compiled JSX -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="strict-origin-when-cross-origin">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; connect-src 'self' https://unpkg.com https://cdn.tailwindcss.com; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://unpkg.com https://cdn.tailwindcss.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src https://fonts.gstatic.com; img-src 'self' https://images.unsplash.com data:; object-src 'none'; base-uri 'self';">

    <!-- SEO & Meta Information -->
    <title>Dirking Versicherungsmakler - Unabhängige Beratung in Schüttorf</title>
    <meta name="description" content="Ihr unabhängiger Versicherungsmakler in Schüttorf. Persönliche Beratung für Privat- und Gewerbekunden. Über 20 Jahre Erfahrung. Jetzt Termin vereinbaren.">
    <meta name="keywords" content="Versicherungsmakler, Schüttorf, Dirking, Versicherungen, Unabhängig, Gewerbeversicherung, Private Krankenversicherung, Altersvorsorge">
    <meta name="author" content="Mario Dirking">

    <!-- Open Graph / Social Media (WhatsApp, LinkedIn, Facebook Vorschau) -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.dirking.de/">
    <meta property="og:title" content="Dirking Versicherungsmakler - Sicherheit für Ihr Leben">
    <meta property="og:description" content="Unabhängig. Fair. Regional. Maßgeschneiderte Konzepte für Privat und Gewerbe.">
    <meta property="og:image" content="./logo.png">

    <link rel="canonical" href="https://www.dirking.de/">
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "InsuranceAgency",
      "name": "Dirking Versicherungsmakler",
      "image": "https://www.dirking.de/logo.png",
      "@id": "https://www.dirking.de",
      "url": "https://www.dirking.de",
      "telephone": "+49123456789",
      "email": "beratung@dirking.de",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Milchstraße 1-3",
        "addressLocality": "Schüttorf",
        "postalCode": "48465",
        "addressCountry": "DE"
      },
      "openingHoursSpecification": [
        {
          "@type": "OpeningHoursSpecification",
          "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday"],
          "opens": "09:00",
          "closes": "17:00"
        },
        {
          "@type": "OpeningHoursSpecification",
          "dayOfWeek": "Friday",
          "opens": "09:00",
          "closes": "14:00"
        }
      ]
    }
    </script>

    <!-- Favicon -->
    <link rel="icon" href="./favicon.png" type="image/png">
    <script src="https://unpkg.com/react@18.3.1/umd/react.production.min.js" integrity="sha384-DGyLxAyjq0f9SPpVevD6IgztCFlnMF6oW/XQGmfe+IsZ8TqEiDrcHkMLKI6fiB/Z" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/react-dom@18.3.1/umd/react-dom.production.min.js" integrity="sha384-gTGxhz21lVGYNMcdJOyq01Edg0jhn/c22nsx0kyqP0TxaV5WVdsSH1fSDUf5YJj1" crossorigin="anonymous"></script>
    <script src="https://cdn.tailwindcss.com/3.4.17"></script>
    <script src="https://unpkg.com/@babel/standalone@7.29.1/babel.min.js" integrity="sha384-Fo0OdKhdnE7y2WmzjOMW4PYjHkkANeu1501pWTqKrzAPeJMFQb4ZTdAA9dtrVUJV" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/lucide@0.563.0/dist/umd/lucide.min.js" integrity="sha384-aRB6X3zBuyu5EQF6GZFp0RCYdOwxYAOdFk4nViPfqSXYxc+MrZlqbM+nUYRwDQn1" crossorigin="anonymous"></script>
    <style>
        /* Font optimized for DSGVO compliance (System Fonts) */
        body { font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif; scroll-behavior: smooth; }
        .animate-fade-in { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        /* Logo Blend Mode Fix */
        .logo-blend { mix-blend-mode: multiply; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900">
    <div id="root">
        <div style="position:fixed;inset:0;background:white;z-index:9999;display:flex;align-items:center;justify-content:center;flex-direction:column;gap:20px;">
            <div style="width:50px;height:50px;border:4px solid #f3f3f3;border-top:4px solid #3498db;border-radius:50%;animation:spin 1s linear infinite;"></div>
            <div style="font-family:sans-serif;font-weight:bold;color:#1e3a8a;">Lade Dirking...</div>
            <style>@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }</style>
        </div>
    </div>

    <script type="text/babel">
const {
  useState,
  useEffect,
  useRef,
  useCallback,
  memo
} = React;

        // Cache für Icons zur Vermeidung wiederholter String-Operationen
        const iconCache = Object.create(null);

        // Hilfskomponente für Icons (Optimiert: Rendert SVG direkt aus lucide.icons)
        const Icon = ({ name, className = "w-6 h-6" }) => {
            if (iconCache[name] === undefined) {
                const iconName = name.split('-').map(part => part.charAt(0).toUpperCase() + part.slice(1)).join('');
                const data = window.lucide && window.lucide.icons ? window.lucide.icons[iconName] : null;

                if (!data) {
                    console.warn(`Icon ${name} (${iconName}) not found`);
                }
                iconCache[name] = data;
            }

            const iconData = iconCache[name];

            if (!iconData) {
                return null;
            }

            return (
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="24"
                    height="24"
                    viewBox="0 0 24 24"
                    fill="none"
                    stroke="currentColor"
                    strokeWidth="2"
                    strokeLinecap="round"
                    strokeLinejoin="round"
                    className={className}
                    aria-hidden="true"
                >
                    {iconData.map((child, index) => {
                        const [tag, attrs] = child;
                        return React.createElement(tag, { key: index, ...attrs });
                    })}
                </svg>
            );
        };

        // Hilfskomponente für das neue Logo (nach Vorlage)
        const LogoIcon = ({ className = "w-10 h-10" }) => (
            <svg viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg" className={className}>
                <circle cx="50" cy="50" r="48" fill="url(#logoGradient)" />
                <path d="M25 50C35 35 45 65 50 65C55 65 65 35 75 50C85 65 95 65 95 65H85C85 65 75 60 65 45C55 30 50 55 45 55C40 55 35 30 25 45C15 60 5 60 5 60H15C15 60 20 60 25 50Z" fill="white" />
                <defs>
                    <linearGradient id="logoGradient" x1="0" y1="0" x2="100" y2="100" gradientUnits="userSpaceOnUse">
                        <stop stopColor="#2563EB" />
                        <stop offset="1" stopColor="#1E3A8A" />
                    </linearGradient>
                </defs>
            </svg>
        );

        // Hilfskomponente für Einkommenssicherung Icon (Schild mit Banknote)
        const IncomeShieldIcon = ({ className = "w-7 h-7" }) => (
            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" className={className}>
                <path d="M12 2L3 6V12C3 16.5 8 21 12 23C16 21 21 16.5 21 12V6L12 2Z" stroke="currentColor" strokeWidth="1.5" fill="none" strokeLinecap="round" strokeLinejoin="round" />
                <rect x="8" y="10" width="8" height="5" rx="0.5" fill="currentColor" opacity="0.7" />
                <line x1="10" y1="10" x2="10" y2="15" stroke="white" strokeWidth="0.75" opacity="0.9" />
                <line x1="14" y1="10" x2="14" y2="15" stroke="white" strokeWidth="0.75" opacity="0.9" />
            </svg>
        );

        const CookieBanner = ({ onInfoClick }) => {
            const [accepted, setAccepted] = useState(false);

            useEffect(() => {
                const consent = localStorage.getItem('dirking_cookie_consent');
                if (consent) setAccepted(true);
            }, []);

            const accept = () => {
                localStorage.setItem('dirking_cookie_consent', 'true');
                setAccepted(true);
            };

            if (accepted) return null;

            return (
                <div className="fixed bottom-4 left-4 right-4 md:right-auto md:w-96 bg-white p-6 rounded-2xl shadow-2xl border border-slate-200 z-[60] animate-slide-up">
                    <h4 className="font-bold text-slate-900 mb-2 flex items-center"><Icon name="cookie" className="w-4 h-4 mr-2 text-blue-600"/> Datenschutzeinstellung</h4>
                    <p className="text-sm text-slate-600 mb-4 leading-relaxed">
                        Wir nutzen technisch notwendige Cookies, um die Funktionalität der Webseite zu gewährleisten (z.B. Ihre Merkliste). Es werden keine Tracking-Daten an Dritte weitergegeben.
                    </p>
                    <div className="flex gap-3">
                        <button onClick={accept} className="bg-slate-900 text-white px-4 py-2 rounded-lg text-sm font-bold hover:bg-blue-600 transition-colors w-full">Einverstanden</button>
                        <button onClick={onInfoClick} className="text-slate-500 px-4 py-2 text-sm font-medium hover:text-slate-900 w-full text-center">Infos</button>
                    </div>
                </div>
            );
        };

        const FEATURES = [
            { label: "Unabhängig", sub: "Freie Tarifwahl" },
            { label: "Erfahren", sub: "Über 20 Jahre Expertise" },
            { label: "Persönlich", sub: "Ein fester Ansprechpartner" },
            { label: "Transparent", sub: "Keine versteckten Kosten" }
        ];

        const MAX_LENGTHS = {
            name: 100,
            email: 100,
            message: 3000,
            claimDescription: 3000,
            phone: 50
        };

        // Strict Allowlist for Claim Types to prevent injection of invalid values
        const CLAIM_DAMAGE_TYPES = [
            "Sturm",
            "Diebstahl",
            "Wasser",
            "Unfall",
            "Sonstiges"
        ];

        const Navigation = memo(({ currentPage, navigateTo, isMenuOpen, setIsMenuOpen, savedServices }) => (
                <nav className="bg-white/95 backdrop-blur-md shadow-sm sticky top-0 z-50">
                    <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div className="flex justify-between h-24 items-center">
                            <button className="flex items-center cursor-pointer text-left bg-transparent border-none p-0 group" onClick={() => navigateTo('home')} aria-label="Zur Startseite">
                                <img 
                                    src="./logo.png" 
                                    alt="Dirking Versicherungsmakler Logo" 
                                    className="h-16 md:h-20 w-auto object-contain logo-blend group-hover:opacity-90 transition-opacity"
                                    onError={(e) => {
                                        e.target.style.display='none';
                                        e.target.nextSibling.style.display='block';
                                    }}
                                />
                                <div style={{display: 'none'}} className="text-2xl font-bold text-blue-900 tracking-wider">
                                    DIRKING
                                </div>
                            </button>
                            <div className="hidden md:flex space-x-8 items-center font-medium text-slate-600">
                                <button onClick={() => navigateTo('home')} className={currentPage === 'home' ? 'text-blue-600' : 'hover:text-blue-600 transition-colors'}>Startseite</button>
                                <button onClick={() => navigateTo('private')} className={currentPage === 'private' ? 'text-blue-600' : 'hover:text-blue-600 transition-colors'}>Privat</button>
                                <button onClick={() => navigateTo('commercial')} className={currentPage === 'commercial' ? 'text-blue-600' : 'hover:text-blue-600 transition-colors'}>Gewerbe</button>
                                <button onClick={() => navigateTo('contact')} className="bg-blue-600 text-white px-6 py-2.5 rounded-full hover:bg-blue-700 transition-all shadow-md relative group">
                                    Kontakt
                                    {savedServices && savedServices.length > 0 && (
                                        <span className="absolute -top-2 -right-2 bg-red-500 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center shadow-sm">
                                            {savedServices.length}
                                        </span>
                                    )}
                                </button>
                            </div>
                            <button
                                className="md:hidden p-2 text-slate-600 relative"
                                onClick={() => setIsMenuOpen(!isMenuOpen)}
                                aria-label={isMenuOpen ? "Menü schließen" : "Menü öffnen"}
                                aria-expanded={isMenuOpen}
                            >
                                <Icon name={isMenuOpen ? "x" : "menu"} />
                                {savedServices && savedServices.length > 0 && !isMenuOpen && (
                                    <span className="absolute top-1 right-1 bg-red-500 text-white text-[10px] font-bold rounded-full w-4 h-4 flex items-center justify-center shadow-sm">
                                        {savedServices.length}
                                    </span>
                                )}
                            </button>
                        </div>
                    </div>
                    {isMenuOpen && (
                    <div className="md:hidden bg-white border-t p-4 space-y-4 shadow-xl">
                        <button onClick={() => navigateTo('home')} className="block w-full text-left text-slate-600 py-2">Startseite</button>
                        <button onClick={() => navigateTo('private')} className="block w-full text-left text-slate-600 py-2">Privat</button>
                        <button onClick={() => navigateTo('commercial')} className="block w-full text-left text-slate-600 py-2">Gewerbe</button>
                        <button onClick={() => navigateTo('contact')} className="block w-full bg-blue-600 text-white p-3 rounded-lg text-center font-bold flex justify-center items-center gap-2">
                            Kontakt
                            {savedServices && savedServices.length > 0 && (
                                <span className="bg-white text-blue-600 text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center">
                                    {savedServices.length}
                                </span>
                            )}
                        </button>
                    </div>
                )}
            </nav>
        ));

        // Memoized to prevent re-renders when parent state changes (e.g. form input)
        const Footer = memo(({ navigateTo, navigateToLegal }) => (
            <footer className="bg-slate-900 text-slate-400 py-16 mt-auto">
                <div className="max-w-7xl mx-auto px-4">
                    <div className="grid grid-cols-1 md:grid-cols-4 gap-12 mb-12">
                        <div className="col-span-1 md:col-span-2">
                            <div className="flex items-center text-white mb-6">
                                <img 
                                    src="./logo.png" 
                                    alt="Dirking Versicherungsmakler Logo" 
                                    className="h-16 w-auto object-contain" 
                                />
                            </div>
                            <p className="max-w-sm mb-6 leading-relaxed">
                                Versicherungen sind Vertrauenssache. Seit über 20 Jahren begleite ich meine Mandanten unabhängig und persönlich – ehrlich, kompetent und auf Augenhöhe.
                            </p>
                            <div className="flex space-x-4 text-white">
                                <a href="tel:+49123456789" aria-label="Anrufen" className="w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center hover:bg-blue-600 transition-colors cursor-pointer"><Icon name="phone" className="w-5 h-5" /></a>
                                <a href="mailto:beratung@dirking.de" aria-label="E-Mail senden" className="w-10 h-10 rounded-full bg-slate-800 flex items-center justify-center hover:bg-green-600 transition-colors cursor-pointer"><Icon name="mail" className="w-5 h-5" /></a>
                            </div>
                        </div>
                        <div>
                            <h4 className="text-white font-bold mb-6 underline decoration-blue-600 underline-offset-8">Navigation</h4>
                            <ul className="space-y-4 text-sm">
                                <li><button onClick={() => navigateTo('private')} className="hover:text-blue-400 transition-colors text-left">Privatkunden</button></li>
                                <li><button onClick={() => navigateTo('commercial')} className="hover:text-blue-400 transition-colors text-left">Gewerbekunden</button></li>
                                <li><button onClick={() => navigateTo('contact')} className="hover:text-blue-400 transition-colors text-left">Termin vereinbaren</button></li>
                                <li><button onClick={() => navigateTo('claim')} className="hover:text-blue-400 transition-colors text-left">Schaden melden</button></li>
                            </ul>
                        </div>
                        <div>
                            <h4 className="text-white font-bold mb-6 underline decoration-blue-600 underline-offset-8">Rechtliches</h4>
                            <ul className="space-y-4 text-sm font-medium">
                                <li><button onClick={() => navigateToLegal('impressum')} className="hover:text-blue-400 transition-colors text-left">Impressum</button></li>
                                <li><button onClick={() => navigateToLegal('datenschutz')} className="hover:text-blue-400 transition-colors text-left">Datenschutz</button></li>
                                <li><button onClick={() => navigateToLegal('erstinfo')} className="hover:text-blue-400 transition-colors text-left">Erstinformation</button></li>
                            </ul>
                        </div>
                    </div>
                    <div className="pt-8 border-t border-slate-800 text-xs flex flex-col md:flex-row justify-between items-center gap-4">
                        <p>&copy; 2026 Dirking Versicherungsmakler. Alle Rechte vorbehalten.</p>
                        <div className="flex items-center"><Icon name="map-pin" className="w-3 h-3 mr-1 text-blue-500" /> Milchstraße 1-3, 48465 Schüttorf</div>
                    </div>
                </div>
            </footer>
        ));

        const HomePage = ({ navigateTo }) => (
            <div className="animate-fade-in">
                <header className="relative min-h-[50vh] flex items-center text-white overflow-hidden bg-slate-900">
                    <img
                        src="https://images.unsplash.com/photo-1610029795220-e5afca4dc7ba?q=80&w=2000&auto=format&fit=crop"
                        srcSet="https://images.unsplash.com/photo-1610029795220-e5afca4dc7ba?q=80&w=640&auto=format&fit=crop 640w, https://images.unsplash.com/photo-1610029795220-e5afca4dc7ba?q=80&w=1024&auto=format&fit=crop 1024w, https://images.unsplash.com/photo-1610029795220-e5afca4dc7ba?q=80&w=2000&auto=format&fit=crop 2000w"
                        sizes="100vw"
                        fetchPriority="high"
                        className="absolute inset-0 w-full h-full object-cover opacity-50"
                        alt="Leuchtturm bei Nacht als Symbol für Sicherheit"
                    />
                    <div className="absolute inset-0 bg-gradient-to-r from-blue-900 via-blue-900/80 to-transparent"></div>
                    <div className="max-w-7xl mx-auto px-4 relative z-10 w-full">
                        <div className="max-w-3xl">
                            <div className="inline-flex items-center bg-blue-600/20 border border-blue-400/30 px-4 py-2 rounded-full text-blue-300 text-sm font-bold mb-6 backdrop-blur-md">
                                <Icon name="shield" className="w-4 h-4 mr-2" /> Ihr Makler vor Ort & Digital
                            </div>
                            <h1 className="text-5xl md:text-7xl font-extrabold mb-8 leading-tight md:whitespace-nowrap">Sicherheit für <br/><span className="text-blue-400 italic">Ihr Leben</span></h1>
                            <p className="text-xl text-blue-100 mb-10 max-w-3xl leading-relaxed">Unabhängig. Fair. Regional. Aus hunderten Tarifen finden wir gemeinsam den Schutz, der wirklich zu Ihnen passt – objektiv und individuell auf Sie zugeschnitten.</p>
                            <div className="flex flex-wrap gap-4">
                                <button onClick={() => navigateTo('contact')} className="bg-blue-600 text-white px-10 py-4 rounded-xl font-bold text-lg shadow-lg hover:bg-blue-700 transition-all transform hover:scale-105 active:scale-95">Termin vereinbaren</button>
                                <button onClick={() => {document.getElementById('leistungen-auswahl').scrollIntoView({behavior:'smooth'})}} className="bg-white/10 backdrop-blur border border-white/20 text-white px-10 py-4 rounded-xl font-bold text-lg hover:bg-white/20 transition-all">Leistungen ansehen</button>
                            </div>
                        </div>
                    </div>
                </header>

                    <section className="py-12 bg-white border-b border-slate-100">
                        <div className="max-w-7xl mx-auto px-4 grid grid-cols-2 md:grid-cols-4 gap-8">
                            {FEATURES.map((item) => (
                                <div key={item.label} className="text-center group cursor-default">
                                    <p className="text-blue-600 font-bold text-xl group-hover:scale-110 transition-transform">{item.label}</p>
                                    <p className="text-slate-400 text-sm mt-1">{item.sub}</p>
                                </div>
                            ))}
                        </div>
                    </section>

                <section id="leistungen-auswahl" className="py-24 bg-slate-50">
                    <div className="max-w-7xl mx-auto px-4 text-center mb-16">
                        <h2 className="text-4xl font-bold mb-4">Individuelle Konzepte</h2>
                        <p className="text-slate-600 max-w-2xl mx-auto text-lg">Wählen Sie Ihren Bereich für maßgeschneiderte Lösungen und Expertenberatung.</p>
                    </div>
                    <div className="max-w-7xl mx-auto px-4 grid grid-cols-1 md:grid-cols-2 gap-10">
                        <button type="button" className="w-full text-left group relative bg-white rounded-[2.5rem] overflow-hidden shadow-sm hover:shadow-2xl transition-all cursor-pointer border border-slate-100 focus-visible:ring-4 focus-visible:ring-blue-500/50 outline-none" onClick={() => navigateTo('private')}>
                            <div className="h-72 overflow-hidden relative">
                                <img
                                    src="https://images.unsplash.com/photo-1605276374104-dee2a0ed3cd6?q=80&w=1000&auto=format&fit=crop"
                                    className="w-full h-full object-cover group-hover:scale-110 transition-transform duration-1000"
                                    alt="Modernes Wohnhaus"
                                    loading="lazy"
                                    decoding="async"
                                />
                                <div className="absolute inset-0 bg-blue-900/10"></div>
                                <div className="absolute top-8 left-8 bg-white/95 backdrop-blur px-5 py-2 rounded-full font-bold text-blue-600 text-sm flex items-center shadow-lg"><Icon name="users" className="w-4 h-4 mr-2" /> Privatkunden</div>
                            </div>
                            <div className="p-12">
                                <h3 className="text-3xl font-bold mb-4">Privater Schutz</h3>
                                <p className="text-slate-600 mb-8 leading-relaxed">Schützen Sie Ihr Heim und Ihre Liebsten mit den besten Tarifen am Markt. Von Haftpflicht bis Vorsorge.</p>
                                <div className="flex items-center text-blue-600 font-bold text-lg group-hover:translate-x-2 transition-transform">Mehr erfahren <Icon name="chevron-right" className="ml-2 w-5 h-5" /></div>
                            </div>
                        </button>
                        <button type="button" className="w-full text-left group relative bg-slate-900 text-white rounded-[2.5rem] overflow-hidden shadow-sm hover:shadow-2xl transition-all cursor-pointer focus-visible:ring-4 focus-visible:ring-blue-500/50 outline-none" onClick={() => navigateTo('commercial')}>
                            <div className="h-72 overflow-hidden relative">
                                <img
                                    src="https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?q=80&w=1000&auto=format&fit=crop"
                                    className="w-full h-full object-cover opacity-60 group-hover:scale-110 transition-transform duration-1000"
                                    alt="Bürogebäude Glasfassade"
                                    loading="lazy"
                                    decoding="async"
                                />
                                <div className="absolute inset-0 bg-blue-900/30"></div>
                                <div className="absolute top-8 left-8 bg-blue-600 px-5 py-2 rounded-full font-bold text-white text-sm flex items-center shadow-lg"><Icon name="building-2" className="w-4 h-4 mr-2" /> Gewerbe</div>
                            </div>
                            <div className="p-12">
                                <h3 className="text-3xl font-bold mb-4">Gewerbliche Lösungen</h3>
                                <p className="text-blue-100 mb-8 leading-relaxed">Risikomanagement für Unternehmen. Wir sichern Ihre betriebliche Existenz ab, damit Sie wachsen können.</p>
                                <div className="flex items-center text-blue-400 font-bold text-lg group-hover:translate-x-2 transition-transform">Mehr erfahren <Icon name="chevron-right" className="ml-2 w-5 h-5" /></div>
                            </div>
                        </button>
                    </div>
                </section>

                <section className="py-24 bg-white overflow-hidden">
                    <div className="max-w-7xl mx-auto px-4 flex flex-col lg:flex-row items-center gap-16">
                        <div className="lg:w-1/2 relative">
                            <img
                                src="https://images.unsplash.com/photo-1450101499163-c8848c66ca85?q=80&w=1000&auto=format&fit=crop"
                                className="rounded-[3rem] shadow-2xl w-full h-[550px] object-cover"
                                alt="Versicherungsmakler im persönlichen Gespräch"
                                loading="lazy"
                                decoding="async"
                            />
                            <div className="absolute bottom-10 right-10 bg-blue-600 text-white p-8 rounded-2xl shadow-2xl hidden md:block max-w-[300px]">
                                <Icon name="layers" className="w-12 h-12 mb-4" />
                                <p className="font-bold text-2xl leading-tight">Hunderte Tarife im Markt-Vergleich</p>
                            </div>
                        </div>
                        <div className="lg:w-1/2">
                            <h2 className="text-4xl font-bold mb-8 text-slate-900">Unabhängigkeit ist unser höchstes Gut.</h2>
                            <p className="text-lg text-slate-600 mb-10 leading-relaxed">Als Versicherungsmakler bin ich gesetzlich dazu verpflichtet, in Ihrem Interesse zu handeln. Ich vergleiche hunderte Angebote neutral und transparent.</p>
                            <div className="space-y-6">
                                {[
                                    "Neutraler Marktvergleich ohne Konzernbindung",
                                    "Volle Unterstützung im Schadensfall",
                                    "Individuelle Risiko- und Bedarfsanalyse",
                                    "Kostenloser Service für alle Kunden"
                                ].map((text, i) => (
                                    <div key={i} className="flex items-start font-semibold text-slate-800">
                                        <div className="bg-green-50 p-1 rounded-full mr-4"><Icon name="check-circle-2" className="text-green-500 w-6 h-6" /></div>
                                        <span className="mt-1">{text}</span>
                                    </div>
                                ))}
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        );



        const PrivatePage = ({ navigateTo, savedServices, toggleService }) => (
            <div className="animate-fade-in">
                <div className="relative h-[450px] bg-blue-900 overflow-hidden">
                    <img
                        src="https://images.unsplash.com/photo-1582268611958-ebfd161ef9cf?q=80&w=2000&auto=format&fit=crop"
                        srcSet="https://images.unsplash.com/photo-1582268611958-ebfd161ef9cf?q=80&w=640&auto=format&fit=crop 640w, https://images.unsplash.com/photo-1582268611958-ebfd161ef9cf?q=80&w=1024&auto=format&fit=crop 1024w, https://images.unsplash.com/photo-1582268611958-ebfd161ef9cf?q=80&w=2000&auto=format&fit=crop 2000w"
                        sizes="100vw"
                        className="w-full h-full object-cover opacity-50"
                        alt="Glückliche Familie vor ihrem Eigenheim"
                    />
                    <div className="absolute inset-0 bg-gradient-to-t from-blue-900 via-transparent to-transparent"></div>
                    <div className="absolute inset-0 flex flex-col items-center justify-center text-center px-4">
                        <h1 className="text-5xl md:text-6xl font-bold text-white drop-shadow-2xl">Schutz für Privatkunden</h1>
                        <p className="text-blue-100 text-xl mt-4 max-w-2xl">Sicher in jeder Lebenslage – für Sie und Ihre Familie.</p>
                    </div>
                </div>
                <div className="py-16 px-4 max-w-7xl mx-auto">
                    <button onClick={() => navigateTo('home')} className="flex items-center text-slate-500 mb-12 hover:text-blue-600 transition-colors font-semibold group">
                        <div className="bg-white p-2 rounded-lg shadow-sm mr-3 group-hover:bg-blue-50 transition-colors"><Icon name="arrow-left" className="w-5 h-5" /></div> Zurück zur Startseite
                    </button>
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-8 mb-20">
                        {[
                            { title: "Hausrat & Gebäude", icon: "home", desc: "Schutz für Ihr Eigentum gegen Elementarschäden, Leitungswasser und Einbruch." },
                            { title: "Haftpflicht & Recht", icon: "shield", desc: "Wichtige Absicherung gegen Personen- und Sachschäden sowie Rechtshilfe." },
                            { title: "Gesundheit & Pflege", icon: "heart-pulse", desc: "Ergänzen oder optimieren Sie Ihren Schutz bei Krankheit und im Pflegefall." },
                            { title: "Altersvorsorge", icon: "clock", desc: "Sichern Sie Ihren Lebensstandard im Ruhestand mit individuellen Konzepten." },
                            { title: "Einkommenssicherung", icon: "income-shield", desc: "Sichern Sie Ihre finanzielle Existenz und Ihren gewohnten Lebensstandard bei krankheits- oder unfallbedingtem Verdienstausfall." },
                            { title: "Schwere Krankheiten Vorsorge", icon: "activity", desc: "Dread Disease: Finanzielle Soforthilfe bei Diagnosen wie Krebs oder Herzinfarkt." }
                        ].map((item, i) => {
                            const isSaved = savedServices && savedServices.includes(item.title);
                            return (
                                <div
                                    key={i}
                                    onClick={() => toggleService(item.title)}
                                    onKeyDown={(e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggleService(item.title); } }}
                                    role="button"
                                    tabIndex={0}
                                    aria-pressed={isSaved}
                                    className={`cursor-pointer bg-white p-8 rounded-[2rem] border transition-all relative group h-full flex flex-col outline-none focus-visible:ring-4 focus-visible:ring-blue-500/50 ${isSaved ? 'border-blue-500 shadow-blue-100 ring-4 ring-blue-50 shadow-xl' : 'border-slate-100 shadow-sm hover:shadow-xl hover:-translate-y-1 hover:border-blue-200'}`}
                                >
                                    <div className={`absolute top-6 right-6 p-2 rounded-full transition-all ${isSaved ? 'text-blue-600 bg-blue-50' : 'text-slate-300 group-hover:text-blue-600 group-hover:bg-slate-50'}`}>
                                        <Icon name="bookmark" className={`w-6 h-6 ${isSaved ? 'fill-current' : ''}`} />
                                    </div>
                                    <div className="w-14 h-14 bg-blue-50 text-blue-600 rounded-2xl flex items-center justify-center mb-8 shadow-inner transition-colors group-hover:bg-blue-600 group-hover:text-white">
                                        {item.icon === 'income-shield' ?
                                            <IncomeShieldIcon className="w-7 h-7" /> :
                                            <Icon name={item.icon} className="w-7 h-7" />
                                        }
                                    </div>
                                    <h3 className="text-2xl font-bold mb-4 text-slate-800">{item.title}</h3>
                                    <p className="text-slate-600 text-sm leading-relaxed mb-6 flex-grow">{item.desc}</p>
                                    <div className={`flex items-center font-bold text-sm mt-auto ${isSaved ? 'text-green-600' : 'text-blue-600'}`}>
                                        {isSaved ? (
                                            <>
                                                <Icon name="check" className="w-4 h-4 mr-2" />
                                                Für Gespräch vorgemerkt
                                            </>
                                        ) : (
                                            <span className="flex items-center opacity-0 group-hover:opacity-100 group-focus:opacity-100 transition-opacity duration-300">
                                                <Icon name="plus" className="w-4 h-4 mr-2" />
                                                Auf die Merkliste
                                            </span>
                                        )}
                                    </div>
                                </div>
                            );
                        })}
                    </div>
                </div>
            </div>
        );

        const COMMERCIAL_SERVICES = [
            { title: "Betriebshaftpflicht", desc: "Der Grundbaustein für jedes Gewerbe. Schützt bei Schäden an Dritten." },
            { title: "Inhaltsversicherung", desc: "Schutz für Maschinen, Waren und Büroeinrichtung bei Elementarschäden." },
            { title: "Personal & Vorsorge", desc: "Stärkt die Mitarbeiterbindung und soziale Absicherung durch betriebliche Vorsorgemodelle und Krankenzusatzleistungen." },
            { title: "D&O Versicherung", desc: "Privat-Haftpflichtschutz für Geschäftsführer bei Fehlentscheidungen." },
            { title: "Gewerbegebäude", desc: "Versicherung für Ihre Immobilien, Lagerhallen oder Werkstätten." },
            { title: "Fuhrpark-Management", desc: "Clevere Flottenversicherung zur Senkung Ihrer Betriebskosten." }
        ];

        const CommercialPage = ({ navigateTo, savedServices, toggleService }) => (
            <div className="animate-fade-in">
                <div className="relative h-[450px] bg-slate-900 overflow-hidden">
                    <img
                        src="https://images.unsplash.com/photo-1497366754035-f200968a6e72?q=80&w=2000&auto=format&fit=crop"
                        srcSet="https://images.unsplash.com/photo-1497366754035-f200968a6e72?q=80&w=640&auto=format&fit=crop 640w, https://images.unsplash.com/photo-1497366754035-f200968a6e72?q=80&w=1024&auto=format&fit=crop 1024w, https://images.unsplash.com/photo-1497366754035-f200968a6e72?q=80&w=2000&auto=format&fit=crop 2000w"
                        sizes="100vw"
                        className="w-full h-full object-cover opacity-40"
                        alt="Moderne Architektur eines Bürokomplexes"
                    />
                    <div className="absolute inset-0 bg-gradient-to-t from-slate-900 via-transparent to-transparent"></div>
                    <div className="absolute inset-0 flex flex-col items-center justify-center text-center px-4">
                        <h1 className="text-5xl md:text-6xl font-bold text-white drop-shadow-2xl">Gewerbliche Absicherung</h1>
                        <p className="text-blue-200 text-xl mt-4 max-w-2xl">Maßgeschneidertes Risikomanagement für Ihren Erfolg.</p>
                    </div>
                </div>
                <div className="py-16 px-4 max-w-7xl mx-auto">
                    <button onClick={() => navigateTo('home')} className="flex items-center text-slate-500 mb-12 hover:text-blue-600 transition-colors font-semibold group">
                        <div className="bg-white p-2 rounded-lg shadow-sm mr-3 group-hover:bg-blue-50 transition-colors"><Icon name="arrow-left" className="w-5 h-5" /></div> Zurück zur Startseite
                    </button>
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-8">
                        {COMMERCIAL_SERVICES.map((item, i) => {
                            const isSaved = savedServices && savedServices.includes(item.title);
                            return (
                                <div
                                    key={i}
                                    onClick={() => toggleService(item.title)}
                                    onKeyDown={(e) => { if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); toggleService(item.title); } }}
                                    role="button"
                                    tabIndex={0}
                                    aria-pressed={isSaved}
                                    className={`cursor-pointer bg-white p-10 rounded-[2rem] border transition-all relative group h-full flex flex-col outline-none focus-visible:ring-4 focus-visible:ring-blue-500/50 ${isSaved ? 'border-blue-500 shadow-blue-100 ring-4 ring-blue-50 shadow-xl' : 'border-slate-100 shadow-sm hover:shadow-xl hover:-translate-y-1 hover:border-blue-200'}`}
                                >
                                    <div className={`absolute top-6 right-6 p-2 rounded-full transition-all ${isSaved ? 'text-blue-600 bg-blue-50' : 'text-slate-300 group-hover:text-blue-600 group-hover:bg-slate-50'}`}>
                                        <Icon name="bookmark" className={`w-6 h-6 ${isSaved ? 'fill-current' : ''}`} />
                                    </div>
                                    <div className="w-14 h-14 bg-blue-50 text-blue-600 rounded-2xl flex items-center justify-center mb-8 shadow-inner transition-colors group-hover:bg-blue-600 group-hover:text-white">
                                        <Icon name="briefcase" className="w-7 h-7" />
                                    </div>
                                    <h3 className="text-2xl font-bold mb-4 text-slate-800">{item.title}</h3>
                                    <p className="text-slate-600 text-sm leading-relaxed mb-6 flex-grow">{item.desc}</p>
                                    <div className={`flex items-center font-bold text-sm mt-auto ${isSaved ? 'text-green-600' : 'text-blue-600'}`}>
                                        {isSaved ? (
                                            <>
                                                <Icon name="check" className="w-4 h-4 mr-2" />
                                                Für Gespräch vorgemerkt
                                            </>
                                        ) : (
                                            <span className="flex items-center opacity-0 group-hover:opacity-100 group-focus:opacity-100 transition-opacity duration-300">
                                                <Icon name="plus" className="w-4 h-4 mr-2" />
                                                Auf die Merkliste
                                            </span>
                                        )}
                                    </div>
                                </div>
                            );
                        })}
                    </div>
                </div>
            </div>
        );

        const CharacterCounter = ({ current, max, id }) => (
            <div id={id} className="flex justify-end mt-1">
                <span className="text-xs text-slate-500 font-medium">
                    {current} / {max} Zeichen
                </span>
            </div>
        );

        const ContactPage = ({ contactData, handleInputChange, handleFormSubmit, formSubmitted, setFormSubmitted, isSubmitting, savedServices, toggleService, clearServices }) => (
            <div className="animate-fade-in py-24 px-4 max-w-7xl mx-auto">
                <div className="text-center mb-16">
                    <h1 className="text-4xl md:text-6xl font-bold mb-6 text-slate-900">Lernen wir uns kennen</h1>
                    <p className="text-xl text-slate-600 max-w-2xl mx-auto">Egal ob persönlich oder per Telefon – Lassen Sie uns ins Gespräch kommen – Ich freue mich darauf, Sie persönlich zu beraten.</p>
                </div>
                <div className="grid grid-cols-1 lg:grid-cols-2 gap-16">
                    <div className="bg-white p-12 rounded-[3rem] shadow-2xl border border-slate-100 relative">
                        {formSubmitted ? (
                            <div className="text-center py-20 animate-fade-in">
                                <div className="bg-green-100 w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-8 text-green-600">
                                    <Icon name="check-circle-2" className="w-12 h-12" />
                                </div>
                                <h3 className="text-4xl font-bold text-slate-900 mb-4">Vielen Dank!</h3>
                                <p className="text-slate-600 text-lg">Ihre Nachricht wurde versendet. Wir melden uns umgehend bei Ihnen zurück.</p>
                                <button onClick={() => setFormSubmitted(false)} className="mt-10 text-blue-600 font-bold hover:underline">Neue Nachricht schreiben</button>
                            </div>
                        ) : (
                            <form onSubmit={handleFormSubmit} className="space-y-8">
                                {savedServices && savedServices.length > 0 && (
                                    <div className="bg-blue-50 p-6 rounded-2xl border border-blue-100">
                                        <div className="flex justify-between items-center mb-3">
                                            <h3 className="font-bold text-blue-800 flex items-center"><Icon name="bookmark" className="w-4 h-4 mr-2" /> Ihre Merkliste</h3>
                                            <button type="button" onClick={clearServices} className="text-xs text-blue-500 hover:text-red-500 font-medium transition-colors">Alle löschen</button>
                                        </div>
                                        <div className="flex flex-wrap gap-2">
                                            {savedServices.map(service => (
                                                <span key={service} className="inline-flex items-center bg-white border border-blue-200 text-blue-700 px-3 py-1 rounded-full text-sm font-medium shadow-sm">
                                                    {service}
                                                    <button
                                                        type="button"
                                                        onClick={() => toggleService(service)}
                                                        className="ml-2 text-blue-400 hover:text-red-500 transition-colors"
                                                        aria-label={`${service} entfernen`}
                                                    >
                                                        <Icon name="x" className="w-3 h-3" />
                                                    </button>
                                                </span>
                                            ))}
                                        </div>
                                    </div>
                                )}
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                    <div className="space-y-2">
                                        <label htmlFor="name" className="text-sm font-bold text-slate-700 ml-2">Name</label>
                                        <input id="name" name="name" maxLength={100} value={contactData.name} onChange={handleInputChange} placeholder="Max Mustermann" className="w-full p-5 bg-slate-50 rounded-2xl border border-slate-200 outline-none focus:ring-2 focus:ring-blue-500 transition-all" required />
                                    </div>
                                    <div className="space-y-2">
                                        <label htmlFor="email" className="text-sm font-bold text-slate-700 ml-2">E-Mail</label>
                                        <input id="email" name="email" type="email" maxLength={100} value={contactData.email} onChange={handleInputChange} placeholder="name@beispiel.de" className="w-full p-5 bg-slate-50 rounded-2xl border border-slate-200 outline-none focus:ring-2 focus:ring-blue-500 transition-all" required />
                                    </div>
                                </div>
                                <div className="space-y-2">
                                    <label htmlFor="message" className="text-sm font-bold text-slate-700 ml-2">Ihre Nachricht</label>
                                    <textarea id="message" name="message" aria-describedby="message-counter" maxLength={MAX_LENGTHS.message} value={contactData.message} onChange={handleInputChange} placeholder={savedServices && savedServices.length > 0 ? "Ich interessiere mich für die ausgewählten Themen..." : "Wobei können wir Ihnen helfen?"} rows="5" className="w-full p-5 bg-slate-50 rounded-2xl border border-slate-200 outline-none focus:ring-2 focus:ring-blue-500 resize-none transition-all"></textarea>
                                    <CharacterCounter id="message-counter" current={contactData.message.length} max={MAX_LENGTHS.message} />
                                </div>
                                <button type="submit" disabled={isSubmitting} className="w-full bg-slate-900 text-white py-6 rounded-2xl font-bold text-xl hover:bg-blue-600 disabled:bg-slate-700 disabled:cursor-not-allowed transition-all shadow-xl transform active:scale-[0.98] flex justify-center items-center">
                                    {isSubmitting ? <><Icon name="loader-2" className="animate-spin mr-3" /> Wird gesendet...</> : "Nachricht jetzt senden"}
                                </button>
                            </form>
                        )}
                    </div>
                    <div className="space-y-8">
                        <div className="bg-slate-900 text-white p-12 rounded-[3rem] shadow-2xl relative overflow-hidden h-fit">
                            <div className="absolute top-0 right-0 p-8 opacity-10"><Icon name="clock" className="w-32 h-32" /></div>
                            <h3 className="text-3xl font-bold mb-10 flex items-center"><Icon name="phone-call" className="mr-4 text-blue-400" /> Direkter Kontakt</h3>
                            <div className="space-y-10">
                                <a href="tel:+49123456789" aria-label="Anrufen: +49 123 456789" className="flex items-center gap-6 group cursor-pointer hover:bg-white/5 p-4 -m-4 rounded-xl transition-colors">
                                    <div className="bg-blue-600 p-5 rounded-2xl group-hover:scale-110 transition-transform shadow-lg shadow-blue-900/40"><Icon name="phone" className="text-white w-7 h-7" /></div>
                                    <div><p className="text-blue-400 text-xs uppercase font-extrabold tracking-widest mb-1">Zentrale</p><p className="text-2xl font-bold">+49 123 456789</p></div>
                                </a>
                                <a href="mailto:beratung@dirking.de" aria-label="E-Mail schreiben: beratung@dirking.de" className="flex items-center gap-6 group cursor-pointer hover:bg-white/5 p-4 -m-4 rounded-xl transition-colors">
                                    <div className="bg-blue-800 p-5 rounded-2xl group-hover:scale-110 transition-transform shadow-lg shadow-blue-900/40"><Icon name="mail" className="text-white w-7 h-7" /></div>
                                    <div><p className="text-blue-400 text-xs uppercase font-extrabold tracking-widest mb-1">Anfragen</p><p className="text-2xl font-bold">beratung@dirking.de</p></div>
                                </a>
                            </div>
                        </div>
                        <div className="p-10 bg-white border border-slate-200 rounded-[2.5rem] shadow-sm">
                            <h4 className="font-bold text-xl mb-4 flex items-center text-slate-800"><Icon name="info" className="mr-3 text-blue-600" /> Sprechzeiten</h4>
                            <p className="text-slate-600 leading-relaxed font-medium">
                                Mo - Do: 09:00 - 17:00 Uhr<br />
                                Fr: 09:00 - 14:00 Uhr<br />
                                Sowie Termine nach individueller Vereinbarung.
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        );

        const LEGAL_TABS = [
            { id: 'impressum', label: 'Impressum', icon: 'info' },
            { id: 'datenschutz', label: 'Datenschutz', icon: 'lock' },
            { id: 'erstinfo', label: 'Erstinformation', icon: 'file-text' }
        ];

        const LegalPage = ({ legalSubTab, setLegalSubTab, navigateToLegal }) => (
            <div className="animate-fade-in py-16 px-4 max-w-5xl mx-auto">
                <h1 className="text-4xl md:text-5xl font-extrabold mb-12 text-center text-slate-900">Rechtliches & Information</h1>
                <div className="flex flex-col md:flex-row justify-center mb-16 gap-3">
                    {LEGAL_TABS.map((tab) => (
                        <button
                            key={tab.id}
                            onClick={() => setLegalSubTab(tab.id)}
                            className={`flex items-center justify-center gap-3 px-8 py-4 rounded-2xl text-base font-bold transition-all shadow-sm w-full md:w-auto ${legalSubTab === tab.id ? 'bg-blue-600 text-white shadow-blue-200 shadow-xl scale-105' : 'text-slate-600 bg-white border border-slate-100 hover:bg-slate-50'}`}
                        >
                            <Icon name={tab.icon} className="w-5 h-5" /> {tab.label}
                        </button>
                    ))}
                </div>

                <div className="bg-white p-10 md:p-20 rounded-[3rem] shadow-sm border border-slate-100 leading-relaxed animate-fade-in">
                    {legalSubTab === 'impressum' && (
                        <div>
                            <h2 className="text-4xl font-bold mb-10 border-b-4 border-blue-600 w-fit pb-4 text-slate-900">Impressum</h2>
                            <div className="grid md:grid-cols-2 gap-16 text-lg">
                                <div className="space-y-8">
                                    <div>
                                        <h4 className="font-bold text-blue-600 uppercase text-sm mb-4">Angaben gemäß § 5 TMG</h4>
                                        <p className="text-slate-700">
                                            <strong className="text-slate-900 text-xl">Dirking Versicherungsmakler</strong><br />
                                            Inhaber: Mario Dirking<br />
                                            Milchstraße 1-3<br />
                                            48465 Schüttorf
                                        </p>
                                    </div>
                                    <div>
                                        <h4 className="font-bold text-blue-600 uppercase text-sm mb-4">Kontakt</h4>
                                        <p className="text-slate-700">
                                            Tel: <strong className="text-slate-900">+49 (0) 123 456789</strong><br />
                                            E-Mail: <strong className="text-slate-900">info@dirking.de</strong>
                                        </p>
                                    </div>
                                </div>
                                <div className="space-y-8">
                                    <div>
                                        <h4 className="font-bold text-blue-600 uppercase text-sm mb-4">Aufsichtsbehörde</h4>
                                        <p className="text-slate-700">
                                            Industrie- und Handelskammer Osnabrück - Emsland - Grafschaft Bentheim<br />
                                            Neuer Graben 38, 49074 Osnabrück<br />
                                            <span className="text-sm opacity-60 italic">www.ihk.de/osnabrueck/</span>
                                        </p>
                                    </div>
                                    <div>
                                        <h4 className="font-bold text-blue-600 uppercase text-sm mb-4">Berufsbezeichnung & Register</h4>
                                        <p className="text-slate-700">
                                            Versicherungsmakler mit Erlaubnis nach § 34d Abs. 1 GewO<br />
                                            Registernummer: <strong className="text-slate-900">D-8UIO-45JGY-79</strong>
                                        </p>
                                    </div>
                                </div>
                            </div>

                            <div className="mt-16 pt-8 border-t border-slate-100">
                                <h4 className="font-bold text-blue-600 uppercase text-sm mb-4">Beteiligungen</h4>
                                <div className="text-slate-700 text-sm leading-relaxed space-y-2">
                                    <p>Der Versicherungsmakler hält keine direkte oder indirekte Beteiligung von mehr als 10% an den Stimmrechten oder am Kapital eines Versicherungsunternehmens.</p>
                                    <p>Kein Versicherungsunternehmen oder Mutterunternehmen eines Versicherungsunternehmens hält eine direkte oder indirekte Beteiligung von mehr als 10% an den Stimmrechten oder am Kapital des Versicherungsmaklers.</p>
                                </div>
                            </div>

                            <div className="mt-8 pt-8 border-t border-slate-100">
                                <h4 className="font-bold text-blue-600 uppercase text-sm mb-4">Berufsrechtliche Regelungen</h4>
                                <p className="text-slate-700 text-sm">
                                    - § 34d Gewerbeordnung (GewO)<br />
                                    - §§ 59-68 Versicherungsvertragsgesetz (VVG)<br />
                                    - Versicherungsvermittlungsverordnung (VersVermV)
                                </p>
                            </div>

                            <div className="mt-8 pt-8 border-t border-slate-100">
                                <h4 className="font-bold text-blue-600 uppercase text-sm mb-4">Haftungsbeschränkungen & Kommunikation</h4>
                                <p className="text-slate-700 text-sm leading-relaxed mb-4">
                                    Die Inhalte dieser Website werden mit größtmöglicher Sorgfalt erstellt. Der Anbieter übernimmt jedoch keine Gewähr für die Richtigkeit, Vollständigkeit und Aktualität der bereitgestellten Inhalte. Die Nutzung der Inhalte der Website erfolgt auf eigene Gefahr des Nutzers. Namentlich gekennzeichnete Beiträge geben die Meinung des jeweiligen Autors und nicht immer die Meinung des Anbieters wieder. Mit der reinen Nutzung der Website des Anbieters kommt keinerlei Vertragsverhältnis zwischen dem Nutzer und dem Anbieter zustande.
                                </p>
                                <p className="text-slate-700 text-sm leading-relaxed">
                                    Aus Rechts- und Sicherheitsgründen sind E-Mails des Anbieters nicht rechtsverbindlich. Eine rechtsverbindliche Bestätigung erhalten Sie auf Wunsch in schriftlicher Form oder per Telefax. Verträge, Absprachen und Auskünfte sind für den Anbieter nur gem. §§ 126, 126a, 126b BGB (Form: schriftlich, qualifizierte elektronische Signatur oder unterschriebenes Telefax) rechtsverbindlich. E-Mails des Anbieters enthalten vertrauliche und rechtlich geschützte Informationen, die nur für den Adressaten bestimmt sind. Sollten Sie nicht der richtige Adressat sein und eine E-Mail des Anbieters irrtümlich erhalten haben, informieren Sie bitte sofort den Anbieter und vernichten Sie diese E-Mail. Kopieren, Weitergabe oder Veröffentlichung der Inhalte von E-Mails des Anbieters ohne dessen Genehmigung ist unzulässig und stellt eine Urheberrechtsverletzung dar.
                                </p>
                            </div>

                            <div className="mt-8 pt-8 border-t border-slate-100">
                                <h4 className="font-bold text-blue-600 uppercase text-sm mb-4">Verantwortlich für den Inhalt nach § 55 Abs. 2 RStV</h4>
                                <p className="text-slate-700">Mario Dirking (Anschrift wie oben)</p>
                            </div>
                        </div>
                    )}

                    {legalSubTab === 'datenschutz' && (
                        <div className="prose prose-blue max-w-none">
                            <h2 className="text-4xl font-bold mb-10 border-b-4 border-blue-600 w-fit pb-4 text-slate-900">Datenschutzerklärung</h2>
                            <div className="space-y-12 text-slate-700 text-lg">
                                <section>
                                    <h4 className="font-bold text-slate-900 text-xl mb-4">1. Datenschutz auf einen Blick</h4>
                                    <p>Wir behandeln Ihre personenbezogenen Daten vertraulich und entsprechend der gesetzlichen Datenschutzvorschriften (DSGVO). Die Nutzung unserer Website ist in der Regel ohne Angabe personenbezogener Daten möglich.</p>
                                </section>
                                <section>
                                    <h4 className="font-bold text-slate-900 text-xl mb-4">2. Datenerfassung auf dieser Website</h4>
                                    <p>Daten, die Sie uns per Kontaktformular übermitteln, werden zwecks Bearbeitung der Anfrage und für den Fall von Anschlussfragen bei uns verschlüsselt gespeichert. Diese Daten geben wir nicht ohne Ihre ausdrückliche Einwilligung weiter.</p>
                                </section>
                                <section>
                                    <h4 className="font-bold text-slate-900 text-xl mb-4">3. Ihre Rechte (Auskunft & Löschung)</h4>
                                    <p>Sie haben jederzeit das Recht auf unentgeltliche Auskunft über Herkunft, Empfänger und Zweck Ihrer gespeicherten personenbezogenen Daten. Sie haben außerdem ein Recht, die Berichtigung oder Löschung dieser Daten zu verlangen. Kontaktieren Sie uns hierzu einfach über die im Impressum angegebenen Wege.</p>
                                </section>
                                <section>
                                    <h4 className="font-bold text-slate-900 text-xl mb-4">4. Rückruf-Service</h4>
                                    <p>Wenn Sie unseren Rückruf-Service nutzen, speichern wir die von Ihnen angegebene Telefonnummer und den gewünschten Zeitrahmen temporär, um den Rückruf durchführen zu können. Nach Erledigung Ihrer Anfrage werden diese Daten gelöscht.</p>
                                </section>
                                <section>
                                    <h4 className="font-bold text-slate-900 text-xl mb-4">5. Schadensmeldung</h4>
                                    <p>Wenn Sie uns einen Schaden melden (via Online-Assistent), verarbeiten wir Ihre Angaben (Schadensart, Datum, Beschreibung) sowie etwaige hochgeladene Fotos. Diese Daten sind zur Prüfung und Abwicklung des Schadensfalls erforderlich und werden an das jeweilige Versicherungsunternehmen weitergeleitet. Die Übertragung erfolgt verschlüsselt.</p>
                                </section>
                            </div>
                        </div>
                    )}

                    {legalSubTab === 'erstinfo' && (
                        <div className="space-y-12">
                            <h2 className="text-4xl font-bold mb-10 border-b-4 border-blue-600 w-fit pb-4 text-slate-900">Erstinformation</h2>
                            
                            <div className="bg-blue-50 p-8 rounded-[2rem] border border-blue-100">
                                <h4 className="font-bold text-blue-900 text-2xl mb-4 flex items-center"><Icon name="shield" className="mr-3" /> Vermittlerstatus</h4>
                                <p className="text-blue-900 text-lg leading-relaxed">Mario Dirking ist als unabhängiger <strong className="underline decoration-blue-500">Versicherungsmakler</strong> mit einer Erlaubnis nach § 34d Abs. 1 der Gewerbeordnung tätig. Wir handeln im Auftrag unserer Mandanten.</p>
                            </div>

                            <div className="grid md:grid-cols-2 gap-12">
                                <section>
                                    <h4 className="font-bold text-slate-900 text-lg mb-4 flex items-center"><Icon name="search" className="mr-2 text-blue-600 w-5 h-5" /> Gemeinsame Registerstelle</h4>
                                    <p className="text-slate-600 text-sm">
                                        Deutscher Industrie- und Handelskammertag (DIHK) e.V.<br />
                                        Breite Straße 29, 10178 Berlin<br />
                                        Tel.: 0180 6 00 58 50 (Festnetzpreis 0,20 €/Anruf; Mobilfunkpreise maximal 0,60 €/Anruf)<br />
                                        www.vermittlerregister.info
                                    </p>
                                </section>
                                <section>
                                    <h4 className="font-bold text-slate-900 text-lg mb-4 flex items-center"><Icon name="hand-coins" className="mr-2 text-blue-600 w-5 h-5" /> Beratung & Vergütung</h4>
                                    <p className="text-slate-600 text-sm">
                                        Die Tätigkeit beinhaltet die Beratung. Die Vergütung erfolgt als konkret vereinbarte Zahlung durch den Kunden oder als in der Versicherungsprämie enthaltene Provision (Courtage), die vom Versicherungsunternehmen ausgezahlt wird.
                                    </p>
                                </section>
                            </div>

                            <section className="bg-slate-50 p-8 rounded-[2rem] border border-slate-100">
                                <h4 className="font-bold text-slate-900 text-xl mb-6 flex items-center"><Icon name="scale" className="mr-3 text-blue-600" /> Schlichtungsstellen</h4>
                                <div className="grid md:grid-cols-2 gap-8 text-sm">
                                    <div>
                                        <p className="font-bold mb-2">Versicherungsombudsmann e.V.</p>
                                        <p className="text-slate-600">Postfach 08 06 32, 10006 Berlin<br />www.versicherungsombudsmann.de</p>
                                    </div>
                                    <div>
                                        <p className="font-bold mb-2">Ombudsmann Private Kranken- und Pflegeversicherung</p>
                                        <p className="text-slate-600">Postfach 06 02 22, 10052 Berlin<br />www.pkv-ombudsmann.de</p>
                                    </div>
                                </div>
                            </section>
                        </div>
                    )}
                </div>
            </div>
        );

        const ClaimWizard = () => {
            const [damageType, setDamageType] = useState('');
            const [date, setDate] = useState('');
            const [description, setDescription] = useState('');
            const [files, setFiles] = useState([]);
            const [fileError, setFileError] = useState('');
            const [isSubmitting, setIsSubmitting] = useState(false);
            const [isSubmitted, setIsSubmitted] = useState(false);
            const [isValid, setIsValid] = useState(false);

            useEffect(() => {
                setIsValid(damageType !== '' && date !== '' && description !== '');
            }, [damageType, date, description]);

            const handleFileChange = (e) => {
                if (e.target.files) {
                    const selectedFiles = Array.from(e.target.files);
                    const invalidFile = selectedFiles.find(file => {
                         const validTypes = ['image/jpeg', 'image/png'];
                         // Check type and size (max 5MB)
                         return !validTypes.includes(file.type) || file.size > 5 * 1024 * 1024;
                    });

                    if (invalidFile) {
                        setFileError('Bitte nur Bilder (JPG, PNG) bis max. 5MB hochladen.');
                        e.target.value = '';
                        setFiles([]);
                        return;
                    }

                    setFileError('');
                    setFiles(selectedFiles);
                }
            };

            const removeFile = (indexToRemove) => {
                setFiles(prev => prev.filter((_, i) => i !== indexToRemove));
            };

            const handleSubmit = (e) => {
                e.preventDefault();
                if (!isValid) return;

                setIsSubmitting(true);
                // Simulate network request
                setTimeout(() => {
                    console.log("Claim Submitted:", { damageType, date, description, files: files.map(f => f.name) });
                    setIsSubmitting(false);
                    setIsSubmitted(true);
                }, 1500);
            };

            if (isSubmitted) {
                return (
                    <div className="bg-white p-8 md:p-12 rounded-[3rem] shadow-xl border border-slate-100 max-w-3xl mx-auto text-center animate-fade-in">
                        <div className="bg-green-100 w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-8 text-green-600">
                            <Icon name="check-circle-2" className="w-12 h-12" />
                        </div>
                        <h2 className="text-3xl font-bold text-slate-900 mb-4">Meldung erhalten</h2>
                        <p className="text-slate-600 text-lg mb-8">Vielen Dank. Wir haben Ihre Schadensmeldung und die {files.length > 0 ? `${files.length} Bilder` : 'Daten'} erhalten. Wir prüfen den Fall und melden uns umgehend bei Ihnen.</p>
                        <button
                            onClick={() => { setIsSubmitted(false); setDamageType(''); setDate(''); setDescription(''); setFiles([]); }}
                            className="text-blue-600 font-bold hover:underline"
                        >
                            Weitere Meldung erfassen
                        </button>
                    </div>
                );
            }

            return (
                <div className="bg-white p-8 md:p-12 rounded-[3rem] shadow-xl border border-slate-100 max-w-3xl mx-auto">
                    <div className="text-center mb-10">
                        <div className="bg-blue-50 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6 text-blue-600">
                            <Icon name="shield-alert" className="w-10 h-10" />
                        </div>
                        <h2 className="text-3xl font-bold text-slate-900 mb-4">Schaden melden</h2>
                        <p className="text-slate-600">Wir helfen Ihnen schnell und unkompliziert. Bitte füllen Sie die folgenden Felder aus, um Ihre Schadensmeldung vorzubereiten.</p>
                    </div>

                    <form onSubmit={handleSubmit} className="space-y-8">
                        <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                            <div className="space-y-2">
                                <label className="text-sm font-bold text-slate-700 ml-2">Art des Schadens *</label>
                                <div className="relative">
                                    <select
                                        value={damageType}
                                        onChange={(e) => {
                                            // Security: Validate against allowlist
                                            if (CLAIM_DAMAGE_TYPES.includes(e.target.value)) {
                                                setDamageType(e.target.value);
                                            }
                                        }}
                                        className="w-full p-5 bg-slate-50 rounded-2xl border border-slate-200 outline-none focus:ring-2 focus:ring-blue-500 transition-all appearance-none cursor-pointer text-slate-700"
                                    >
                                        <option value="" disabled>Bitte wählen...</option>
                                        {CLAIM_DAMAGE_TYPES.map(type => (
                                            <option key={type} value={type}>{type}</option>
                                        ))}
                                    </select>
                                    <div className="absolute right-5 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400">
                                        <Icon name="chevron-down" className="w-5 h-5" />
                                    </div>
                                </div>
                            </div>
                            <div className="space-y-2">
                                <label className="text-sm font-bold text-slate-700 ml-2">Wann ist es passiert? *</label>
                                <input
                                    type="date"
                                    value={date}
                                    onChange={(e) => setDate(e.target.value)}
                                    className="w-full p-5 bg-slate-50 rounded-2xl border border-slate-200 outline-none focus:ring-2 focus:ring-blue-500 transition-all text-slate-700"
                                />
                            </div>
                        </div>
                        <div className="space-y-2">
                            <label className="text-sm font-bold text-slate-700 ml-2">Kurzbeschreibung *</label>
                            <textarea
                                value={description}
                                onChange={(e) => {
                                    if (e.target.value.length <= MAX_LENGTHS.claimDescription) {
                                        setDescription(e.target.value);
                                    }
                                }}
                                aria-describedby="description-counter"
                                maxLength={MAX_LENGTHS.claimDescription}
                                rows="5"
                                className="w-full p-5 bg-slate-50 rounded-2xl border border-slate-200 outline-none focus:ring-2 focus:ring-blue-500 resize-none transition-all"
                                placeholder="Was ist passiert? Welche Gegenstände sind betroffen?"
                            ></textarea>
                            <CharacterCounter id="description-counter" current={description.length} max={MAX_LENGTHS.claimDescription} />
                        </div>

                        <div className="space-y-2">
                            <label className="text-sm font-bold text-slate-700 ml-2">Bilder hinzufügen (Optional)</label>
                            <div className="relative border-2 border-dashed border-slate-200 rounded-2xl p-8 text-center hover:border-blue-400 focus-within:border-blue-500 focus-within:ring-4 focus-within:ring-blue-500/20 transition-colors group cursor-pointer bg-slate-50/50">
                                <input
                                    type="file"
                                    multiple
                                    accept="image/*"
                                    onChange={handleFileChange}
                                    className="absolute inset-0 w-full h-full opacity-0 cursor-pointer"
                                />
                                <div className="flex flex-col items-center justify-center pointer-events-none">
                                    <div className="bg-white p-3 rounded-full shadow-sm mb-3 group-hover:scale-110 transition-transform">
                                        <Icon name="upload-cloud" className="w-6 h-6 text-blue-600" />
                                    </div>
                                    <p className="font-bold text-slate-700">Klicken zum Auswählen</p>
                                    <p className="text-xs text-slate-400 mt-1">JPG, PNG (Max. 5MB)</p>
                                </div>
                            </div>
                            {fileError && <p className="text-red-500 text-sm mt-2 font-bold animate-fade-in"><Icon name="alert-circle" className="w-4 h-4 inline mr-1"/> {fileError}</p>}
                            {files.length > 0 && (
                                <div className="flex flex-wrap gap-2 mt-2">
                                    {files.map((file, i) => (
                                        <span key={i} className="bg-blue-50 text-blue-700 pl-3 pr-2 py-1 rounded-full text-xs font-bold flex items-center border border-blue-100">
                                            <Icon name="image" className="w-3 h-3 mr-1" />
                                            <span className="mr-1">{file.name}</span>
                                            <button
                                                type="button"
                                                onClick={() => removeFile(i)}
                                                className="p-0.5 hover:bg-red-100 hover:text-red-600 rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-red-500"
                                                aria-label={`${file.name} entfernen`}
                                            >
                                                <Icon name="x" className="w-3 h-3" />
                                            </button>
                                        </span>
                                    ))}
                                </div>
                            )}
                        </div>

                        <button
                           type="submit"
                           disabled={!isValid || isSubmitting}
                           className="w-full bg-slate-900 text-white py-6 rounded-2xl font-bold text-xl hover:bg-blue-600 disabled:bg-slate-300 disabled:cursor-not-allowed transition-all shadow-xl transform active:scale-[0.98] flex justify-center items-center"
                        >
                            {isSubmitting ? <><Icon name="loader-2" className="animate-spin mr-3" /> Wird gesendet...</> : <><Icon name="send" className="w-6 h-6 mr-3" /> Schaden melden</>}
                        </button>
                        <p className="text-xs text-center text-slate-400 mt-4">
                            Wir behandeln Ihre Daten vertraulich gemäß unserer Datenschutzerklärung.
                        </p>
                    </form>
                </div>
            );
        };

        const ClaimPage = ({ navigateTo }) => (
            <div className="animate-fade-in">
                <div className="relative h-[400px] bg-slate-900 overflow-hidden">
                    <img
                        src="https://images.unsplash.com/photo-1599256621730-d3df51f42000?q=80&w=2000&auto=format&fit=crop"
                        srcSet="https://images.unsplash.com/photo-1599256621730-d3df51f42000?q=80&w=640&auto=format&fit=crop 640w, https://images.unsplash.com/photo-1599256621730-d3df51f42000?q=80&w=1024&auto=format&fit=crop 1024w, https://images.unsplash.com/photo-1599256621730-d3df51f42000?q=80&w=2000&auto=format&fit=crop 2000w"
                        sizes="100vw"
                        className="w-full h-full object-cover opacity-40"
                        alt="Zerbrochene Fensterscheibe"
                    />
                    <div className="absolute inset-0 bg-gradient-to-t from-slate-50 via-transparent to-transparent"></div>
                    <div className="absolute inset-0 flex flex-col items-center justify-center text-center px-4 pb-20">
                        <h1 className="text-4xl md:text-6xl font-bold text-white drop-shadow-2xl">Schadenservice</h1>
                        <p className="text-slate-200 text-xl mt-4 max-w-2xl">Wir lassen Sie nicht im Regen stehen.</p>
                    </div>
                </div>
                <div className="max-w-7xl mx-auto px-4 -mt-32 pb-24 relative z-10">
                    <button onClick={() => navigateTo('home')} className="flex items-center text-white/80 mb-8 hover:text-white transition-colors font-semibold group w-fit">
                        <div className="bg-white/10 backdrop-blur p-2 rounded-lg shadow-sm mr-3 group-hover:bg-white/20 transition-colors"><Icon name="arrow-left" className="w-5 h-5" /></div> Zurück zur Startseite
                    </button>
                    <ClaimWizard />
                </div>
            </div>
        );

        const useLocalStorage = (key, initialValue) => {
            const [storedValue, setStoredValue] = useState(() => {
                if (typeof window === "undefined") {
                    return initialValue;
                }
                try {
                    const item = window.localStorage.getItem(key);
                    return item ? JSON.parse(item) : initialValue;
                } catch (error) {
                    console.log(error);
                    return initialValue;
                }
            });
            const setValue = (value) => {
                try {
                    const valueToStore = value instanceof Function ? value(storedValue) : value;
                    setStoredValue(valueToStore);
                    if (typeof window !== "undefined") {
                        window.localStorage.setItem(key, JSON.stringify(valueToStore));
                    }
                } catch (error) {
                    console.log(error);
                }
            };
            return [storedValue, setValue];
        };

        // Memoized to prevent re-renders on every keystroke in the contact form
        const StickyCallback = memo(() => {
            const [isOpen, setIsOpen] = useState(false);
            const [phone, setPhone] = useState("");
            const [time, setTime] = useState("morning");
            const [status, setStatus] = useState("idle"); // idle, submitting, success
            const [showToast, setShowToast] = useState(false);

            const handleSubmit = (e) => {
                e.preventDefault();
                setStatus("submitting");
                setTimeout(() => {
                    setStatus("success");
                    setIsOpen(false);
                    setShowToast(true);
                    setPhone("");
                    // Keep time selection for the toast message
                    setStatus("idle");
                    setTimeout(() => setShowToast(false), 5000);
                }, 1500);
            };

            return (
                <>
                    {/* Toast Notification */}
                    {showToast && (
                        <div className="fixed bottom-4 left-1/2 -translate-x-1/2 bg-slate-900 text-white px-6 py-4 rounded-2xl shadow-2xl z-[100] flex items-center gap-4 animate-fade-in w-[90%] max-w-md">
                            <div className="bg-green-500 rounded-full p-1"><Icon name="check" className="w-4 h-4 text-white" /></div>
                            <div>
                                <p className="font-bold text-sm">Rückruf angefordert!</p>
                                <p className="text-xs text-slate-300">Wir melden uns {time === 'morning' ? 'morgens' : time === 'lunch' ? 'mittags' : 'abends'} bei Ihnen.</p>
                            </div>
                            <button onClick={() => setShowToast(false)} className="ml-auto text-slate-400 hover:text-white"><Icon name="x" className="w-4 h-4" /></button>
                        </div>
                    )}

                    {/* Floating Action Button */}
                    {!isOpen && (
                        <button
                            onClick={() => setIsOpen(true)}
                            className="fixed bottom-4 right-4 bg-blue-600 text-white p-4 rounded-full shadow-2xl hover:scale-110 active:scale-90 transition-all z-50 shadow-blue-600/30 group"
                            aria-label="Rückruf anfordern"
                        >
                            <Icon name="phone" className="w-6 h-6" />
                            <span className="absolute right-full mr-4 top-1/2 -translate-y-1/2 bg-slate-900 text-white px-3 py-1.5 rounded-lg text-sm font-bold opacity-0 group-hover:opacity-100 group-focus-visible:opacity-100 transition-opacity pointer-events-none whitespace-nowrap shadow-lg">
                                Rückruf?
                            </span>
                        </button>
                    )}

                    {/* Modal / Popover */}
                    {isOpen && (
                        <div className="fixed inset-0 z-50 flex items-end justify-end sm:p-6 pointer-events-none">
                            <div className="absolute inset-0 bg-slate-900/20 backdrop-blur-sm pointer-events-auto transition-opacity" onClick={() => setIsOpen(false)}></div>
                            <div className="bg-white rounded-t-[2rem] sm:rounded-3xl shadow-2xl border border-slate-100 p-6 w-full sm:w-96 pointer-events-auto animate-fade-in relative z-10 mr-0 sm:mr-0 mb-0 sm:mb-16">
                                <button
                                    onClick={() => setIsOpen(false)}
                                    className="absolute top-4 right-4 p-2 bg-slate-50 rounded-full text-slate-400 hover:text-slate-600 hover:bg-slate-100 transition-colors"
                                    aria-label="Schließen"
                                >
                                    <Icon name="x" className="w-4 h-4" />
                                </button>

                                <div className="mb-6">
                                    <div className="w-12 h-12 bg-blue-50 text-blue-600 rounded-2xl flex items-center justify-center mb-4">
                                        <Icon name="phone-call" className="w-6 h-6" />
                                    </div>
                                    <h3 className="text-xl font-bold text-slate-900">Rückruf anfordern</h3>
                                    <p className="text-slate-500 text-sm mt-1">Hinterlassen Sie Ihre Nummer, wir rufen schnellstmöglich zurück.</p>
                                </div>

                                <form onSubmit={handleSubmit} className="space-y-5">
                                    <div>
                                        <label htmlFor="cb-phone" className="block text-sm font-bold text-slate-700 mb-2">Telefonnummer</label>
                                        <div className="relative">
                                            <Icon name="smartphone" className="absolute left-4 top-3.5 text-slate-400 w-5 h-5" />
                                            <input
                                                id="cb-phone"
                                                type="tel"
                                                required
                                                value={phone}
                                                onChange={(e) => {
                                                    if (e.target.value.length <= MAX_LENGTHS.phone) {
                                                        setPhone(e.target.value);
                                                    }
                                                }}
                                                maxLength={MAX_LENGTHS.phone}
                                                placeholder="0171 12345678"
                                                className="w-full pl-12 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all font-medium"
                                            />
                                        </div>
                                    </div>

                                    <div>
                                        <span className="block text-sm font-bold text-slate-700 mb-3">Beste Zeit</span>
                                        <div className="grid grid-cols-3 gap-2">
                                            {[
                                                { id: 'morning', label: 'Morgens', icon: 'sunrise' },
                                                { id: 'lunch', label: 'Mittags', icon: 'sun' },
                                                { id: 'evening', label: 'Abends', icon: 'moon' }
                                            ].map((opt) => (
                                                <label key={opt.id} className={`flex flex-col items-center justify-center p-3 rounded-xl border cursor-pointer transition-all focus-within:ring-2 focus-within:ring-blue-500 focus-within:ring-offset-2 ${time === opt.id ? 'bg-blue-600 border-blue-600 text-white shadow-lg shadow-blue-200' : 'bg-white border-slate-200 text-slate-600 hover:border-blue-300 hover:bg-blue-50'}`}>
                                                    <input
                                                        type="radio"
                                                        name="callback-time"
                                                        value={opt.id}
                                                        checked={time === opt.id}
                                                        onChange={(e) => setTime(e.target.value)}
                                                        className="sr-only"
                                                    />
                                                    <Icon name={opt.icon} className="w-5 h-5 mb-1" />
                                                    <span className="text-[10px] uppercase font-bold tracking-wider">{opt.label}</span>
                                                </label>
                                            ))}
                                        </div>
                                    </div>

                                    <button
                                        type="submit"
                                        disabled={status === 'submitting'}
                                        className="w-full bg-slate-900 text-white py-4 rounded-xl font-bold hover:bg-blue-600 disabled:bg-slate-700 disabled:cursor-not-allowed transition-all shadow-xl flex items-center justify-center gap-2"
                                    >
                                        {status === 'submitting' ? <><Icon name="loader-2" className="animate-spin w-5 h-5" /> Sende...</> : <>Rückruf anfordern <Icon name="arrow-right" className="w-5 h-5" /></>}
                                    </button>
                                </form>
                            </div>
                        </div>
                    )}
                </>
            );
        });




        const App = () => {
            const [currentPage, setCurrentPage] = useState('home');
            const [legalSubTab, setLegalSubTab] = useState('impressum');
            const [isMenuOpen, setIsMenuOpen] = useState(false);

            // Merkliste-Status (Persistent)
            const [savedServices, setSavedServices] = useLocalStorage('dirking_saved_services', []);

            // Formular-Status
            const [contactData, setContactData] = useState({
                name: '',
                email: '',
                message: ''
            });
            const [formSubmitted, setFormSubmitted] = useState(false);
            const [isSubmitting, setIsSubmitting] = useState(false);

            useEffect(() => {
                window.scrollTo(0, 0);
            }, [currentPage, legalSubTab]);

            const navigateTo = useCallback((page) => {
                setCurrentPage(page);
                setIsMenuOpen(false);
            }, []);

            const navigateToLegal = useCallback((tab) => {
                setLegalSubTab(tab);
                setCurrentPage('legal');
                setIsMenuOpen(false);
            }, []);

            const toggleService = (service) => {
                setSavedServices(prev => {
                    if (prev.includes(service)) {
                        return prev.filter(s => s !== service);
                    } else {
                        return [...prev, service];
                    }
                });
            };

            const clearServices = () => {
                setSavedServices([]);
            };

            const handleInputChange = (e) => {
                const { name, value } = e.target;
                // Security: strict input validation & Allowlisting
                if (!MAX_LENGTHS[name] || value.length > MAX_LENGTHS[name]) {
                    return;
                }
                setContactData(prev => ({
                    ...prev,
                    [name]: value
                }));
            };

            const handleFormSubmit = (e) => {
                e.preventDefault();
                setIsSubmitting(true);
                // Simulierte Netzwerkverzögerung für besseres UX-Feedback
                // TIPP: Für echte E-Mails nutzen Sie Dienste wie Formspree.io oder Getform.io
                // Ersetzen Sie dazu einfach diesen Handler durch ein echtes Form-Action-Attribut oder einen fetch()-Call.
                setTimeout(() => {
                    console.log("Formular abgesendet:", { ...contactData, interestedIn: savedServices });
                    setIsSubmitting(false);
                    setFormSubmitted(true);
                }, 1500);
            };

            return (
                <div className="min-h-screen flex flex-col font-sans">
                    <a href="#main-content" className="sr-only focus:not-sr-only focus:fixed focus:top-4 focus:left-4 focus:z-[100] focus:px-6 focus:py-3 focus:bg-white focus:text-blue-600 focus:font-bold focus:rounded-xl focus:shadow-2xl focus:outline-none focus:ring-4 focus:ring-blue-600 transition-all">Zum Hauptinhalt springen</a>
                    <Navigation currentPage={currentPage} navigateTo={navigateTo} isMenuOpen={isMenuOpen} setIsMenuOpen={setIsMenuOpen} savedServices={savedServices} />
                    <main id="main-content" tabIndex="-1" className="flex-grow outline-none">
                        {currentPage === 'home' && <HomePage navigateTo={navigateTo} />}
                        {currentPage === 'private' && <PrivatePage navigateTo={navigateTo} savedServices={savedServices} toggleService={toggleService} />}
                        {currentPage === 'commercial' && <CommercialPage navigateTo={navigateTo} savedServices={savedServices} toggleService={toggleService} />}
                        {currentPage === 'contact' && <ContactPage
                            contactData={contactData}
                            handleInputChange={handleInputChange}
                            handleFormSubmit={handleFormSubmit}
                            formSubmitted={formSubmitted}
                            setFormSubmitted={setFormSubmitted}
                            isSubmitting={isSubmitting}
                            savedServices={savedServices}
                            toggleService={toggleService}
                            clearServices={clearServices}
                        />}
                        {currentPage === 'claim' && <ClaimPage navigateTo={navigateTo} />}
                        {currentPage === 'legal' && <LegalPage
                            legalSubTab={legalSubTab}
                            setLegalSubTab={setLegalSubTab}
                            navigateToLegal={navigateToLegal}
                        />}
                    </main>
                    <Footer navigateTo={navigateTo} navigateToLegal={navigateToLegal} />
                    <StickyCallback />
                    <CookieBanner onInfoClick={() => navigateToLegal('datenschutz')} />
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
